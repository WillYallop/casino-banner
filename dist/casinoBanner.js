export default class CasinoBanner{constructor(a){// Start
this.defaults={fps:24,classes:{slider:"slider",wrapper:"slider-wrapper",slide:"slide"}},this.config={...this.defaults,...a},this.translateY=0,this.speed=1,this.skip=!0,this.initiateHandler()}async initiateHandler(){var a=Math.ceil;try{if(await verifyConfig(this.config),this.bannerElement=document.getElementById(this.config.id),!this.bannerElement)throw`Element with ID: ${this.config.id}, cannot be found!`;// Set elements
this.sliderElement=this.bannerElement.getElementsByClassName(this.config.classes.slider)[0],this.sliderWrapper=this.sliderElement.getElementsByClassName(this.config.classes.wrapper)[0],this.slideElements=this.sliderElement.getElementsByClassName(this.config.classes.slide),this.videoElement=document.getElementById(this.config.videoId),this.sliderElement.style.position="relative",this.sliderWrapper.style.position="absolute",this.sliderWrapper.style.top=0,this.sliderWrapper.style.left=0,this.sliderWrapper.style.right=0,this.sliderWrapper.style.bottom=0,this.totalSlides=this.slideElements.length,this.activeSlideIndex=a(this.totalSlides/2),this.activeSlideIndex++,this.oddEvenSlides=oddOrEven(this.config.slidesPerView),"even"===this.oddEvenSlides&&this.activeSlideIndex++,this.initiateSlider(),this.events(),this.onResize()}catch(a){console.error(a)}}// Slider
initiateSlider(){// Handle slideHeight and default vals
// Slider Loop
this.skip=!0,this.setSlideDefaults(),this.loop=setInterval(()=>{this.translateY+=this.speed,this.sliderWrapper.style.transform=`translateY(${this.translateY}px)`;let a=Math.round(this.slideHeight/2);0==this.translateY%a&&(this.skip?("odd"===this.oddEvenSlides&&this.updateActiveSlide("inc"),this.skip=!1):(this.sliderWrapper.prepend(this.slideElements[this.totalSlides-1]),this.translateY-=this.slideHeight,this.sliderWrapper.style.transform=`translateY(${this.translateY}px)`,"even"===this.oddEvenSlides&&this.updateActiveSlide("dec"),this.skip=!0))},1e3/this.config.fps)}setSlideDefaults(){this.slideHeight=Math.floor(this.sliderElement.offsetHeight/this.config.slidesPerView),this.sliderElement.style.overflowY="hidden",this.sliderWrapper.style.height=`${this.sliderElement.offsetHeight}px`;// For children in slider element
for(let a,b=0;b<this.slideElements.length;b++)a=this.slideElements[b],a.style.height=`${this.slideHeight}px`;// Set begining translateY at half the slider height - half a slide height
// this.translateY = -Math.abs((this.sliderElement.offsetHeight / 2) - (this.slideHeight / 2));
// Set active slide to middle
this.translateY=-Math.abs(this.totalSlides/2*this.slideHeight-this.slideHeight),this.slideElements[this.activeSlideIndex-2].classList.add("twoOff"),this.slideElements[this.activeSlideIndex-1].classList.add("oneOff"),this.slideElements[this.activeSlideIndex].classList.add("active"),this.slideElements[this.activeSlideIndex+1].classList.add("oneOff"),this.slideElements[this.activeSlideIndex+2].classList.add("twoOff")}updateActiveSlide(){// Reset all classes
// Set
resetSlideClasses(this.slideElements),this.slideElements[this.activeSlideIndex-2].classList.add("twoOff"),this.slideElements[this.activeSlideIndex-1].classList.add("oneOff"),this.slideElements[this.activeSlideIndex].classList.add("active"),this.slideElements[this.activeSlideIndex+1].classList.add("oneOff"),this.slideElements[this.activeSlideIndex+2].classList.add("twoOff")}events(){// Hover
for(let a=0;a<this.slideElements.length;a++)this.slideElements[a].setAttribute("video-active","false"),this.slideElements[a].addEventListener("mouseover",a=>{var b=a.currentTarget;let c=b.attributes["video-url"].value;if("false"===b.attributes["video-active"].value){b.setAttribute("video-active","true"),this.videoElement.src=c;for(let a=0;a<this.slideElements.length;a++)b!=this.slideElements[a]&&this.slideElements[a].setAttribute("video-active","false")}},!0)}onResize(){window.addEventListener("resize",()=>{clearInterval(this.loop),this.initiateSlider(),this.slideElements[this.activeSlideIndex-2].classList.add("twoOff"),this.slideElements[this.activeSlideIndex-1].classList.add("oneOff"),this.slideElements[this.activeSlideIndex].classList.add("active"),this.slideElements[this.activeSlideIndex+1].classList.add("oneOff"),this.slideElements[this.activeSlideIndex+2].classList.add("twoOff")},!0)}}// Verify config
function verifyConfig(a){return new Promise((b,c)=>{// slide
"string"==typeof a.id?"string"==typeof a.videoId?"number"==typeof a.slidesPerView?a.fps!=null&&("number"==typeof a.fps?a.classes!=null&&("object"==typeof a.classes?a.classes.slider!=null&&("string"==typeof a.classes.slider?a.classes.wrapper!=null&&("string"==typeof a.classes.wrapper?a.classes.slide!=null&&"string"!=typeof a.classes.slide&&c("classes \"slide\" in config should be a string"):c("classes \"wrapper\" in config should be a string")):c("classes \"slider\" in config should be a string")):c("\"classes\" in config should be an object")):c("\"fps\" in config should be a number")):c("\"slidesPerView\" in config should be a number"):c("\"videoId\" in config should be a string"):c("\"id\" in config should be a string"),b()})}function oddOrEven(a){return 0==a%2?"even":"odd"}function resetSlideClasses(a){for(let b,c=0;c<a.length;c++)b=a[c],b.classList.remove("active"),b.classList.remove("oneOff"),b.classList.remove("twoOff")}